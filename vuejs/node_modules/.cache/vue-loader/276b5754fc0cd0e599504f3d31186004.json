{
  "remainingRequest": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/src/components/Rights.vue?vue&type=script&lang=js&",
  "dependencies": [
    {
      "path": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/src/components/Rights.vue",
      "mtime": 1585510159616
    },
    {
      "path": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/node_modules/cache-loader/dist/cjs.js",
      "mtime": 1585510160596
    },
    {
      "path": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/node_modules/babel-loader/lib/index.js",
      "mtime": 1585510159884
    },
    {
      "path": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/node_modules/vuetify-loader/lib/loader.js",
      "mtime": 1585510160728
    },
    {
      "path": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/node_modules/cache-loader/dist/cjs.js",
      "mtime": 1585510160596
    },
    {
      "path": "/home/ptcherniati/NetBeansProjects/spring-boot-jpa/vuejs/node_modules/vue-loader/lib/index.js",
      "mtime": 1585510160504
    }
  ],
  "contextDependencies": [],
  "result": [
    {
      "type": "Buffer",
      "data": "base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBSaWdodE5vZGUgZnJvbSAiQC9jb21wb25lbnRzL1JpZ2h0Tm9kZSI7CmltcG9ydCBodHRwIGZyb20gIkAvaHR0cC9odHRwIjsKaW1wb3J0IGNvbmZpZyBmcm9tICJAL2NvbmZpZyI7CmltcG9ydCB7IHN0b3JhZ2UsIFN0b3JhZ2UgfSBmcm9tICJAL3N0b3JhZ2UiOwppbXBvcnQgc3RvcmUgZnJvbSAiQC9zdG9yZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUmlnaHRzIiwKICBjb21wdXRlZDogewogICAgcHN0ZFJlZmVyZW5jZSgpIHsKICAgICAgY29uc3QgcmVmZXJlbmNlID0gdGhpcy5yaWdodHMucmVmZXJlbmNlcy5maWx0ZXIoCiAgICAgICAgcmVmZXJlbmNlID0+CiAgICAgICAgICByZWZlcmVuY2UubmFtZSA9PSAidHlwZXNfZGVfZG9ubmVlc19wYXJfdGhlbWVzX2RlX3NpdGVzX2V0X3Byb2pldCIKICAgICAgKVswXTsKICAgICAgdGhpcy5nZXRSZWZlcmVuY2UocmVmZXJlbmNlLCAicHN0ZCIpOwogICAgICByZXR1cm4gcmVmZXJlbmNlOwogICAgfSwKICAgIGR2dVJlZmVyZW5jZSgpIHsKICAgICAgY29uc3QgcmVmZXJlbmNlID0gdGhpcy5yaWdodHMucmVmZXJlbmNlcy5maWx0ZXIoCiAgICAgICAgcmVmZXJlbmNlID0+CiAgICAgICAgICByZWZlcmVuY2UubmFtZSA9PSAidmFyaWFibGVzX2V0X3VuaXRlc19wYXJfdHlwZXNfZGVfZG9ubmVlcyIKICAgICAgKVswXTsKICAgICAgdGhpcy5nZXRSZWZlcmVuY2UocmVmZXJlbmNlLCAiZHZ1Iik7CiAgICAgIHJldHVybiByZWZlcmVuY2U7CiAgICB9LAogICAgaW5pdCgpIHsKICAgICAgbGV0IGluaXRlZCA9IHsKICAgICAgICBwc3RkUmVmZXJlbmNlOiB0aGlzLnBzdGRSZWZlcmVuY2UsCiAgICAgICAgZHZ1UmVmZXJlbmNlOiB0aGlzLmR2dVJlZmVyZW5jZQogICAgICB9OwogICAgICB0aGlzLiRlbWl0KCJwc3RBbmREdnVJbml0ZWQiLCBpbml0ZWQpOwogICAgICByZXR1cm4gaW5pdGVkOwogICAgfSwKICB9LAogIHByb3BzOiB7CiAgICByaWdodHM6IE9iamVjdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBzdGRfOiB7fSwKICAgICAgZHZ1OiBudWxsLAogICAgICBkZWVwOiAwLAogICAgICBjb21sdW1zOiB7fSwKICAgICAgdmlzaWJsZTpmYWxzZSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRSZWZlcmVuY2UocmVmZXJlbmNlLCB0bykgewogICAgICByZXR1cm4gaHR0cAogICAgICAgIC5sb2FkUmVmZXJlbmNlKHJlZmVyZW5jZSwgY29uZmlnLkFQUExJQ0FUSU9OX05BTUUpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgc3RvcmFnZS5zZXQoU3RvcmFnZS5UT0tFTl9LRVksIHJlc3BvbnNlLmRhdGEudG9rZW4pOwogICAgICAgICAgdGhpc1t0b10gPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgaWYgKHRvID09ICJwc3RkIikgewogICAgICAgICAgICB0aGlzWyJwc3RkXyJdID0gdGhpcy5nZXRQc3RkKHJlZmVyZW5jZS5jb2x1bW5zLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJGVtaXQoInVwZGF0ZToiICsgdG8sIHJlc3BvbnNlLmRhdGEpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgIHRoaXMucHN0ZCA9IHt9OwogICAgICAgICAgdGhpcy4kZW1pdCgiZXJyb3JfIiArIHRvLCBlcnJvcik7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ2V0UHN0ZChjb2x1bW5zLCBkYXRhKSB7CiAgICAgIGlmIChPYmplY3Qua2V5cyhjb2x1bW5zKS5sZW5ndGggPT0gMCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgICBsZXQgY29sdW1uID0gT2JqZWN0LnZhbHVlcyhjb2x1bW5zKVt0aGlzLmRlZXBdLm5hbWU7CiAgICAgIGxldCBwc3RkID0ge307CiAgICAgIGRhdGEuZm9yRWFjaChlbGVtZW50ID0+IHsKICAgICAgICBsZXQgdmFsdWUgPSBlbGVtZW50LnJlZlZhbHVlc1tjb2x1bW5dOwogICAgICAgIGlmIChwc3RkW3ZhbHVlXSA9PSBudWxsKSB7CiAgICAgICAgICBwc3RkW3ZhbHVlXSA9IFtlbGVtZW50XTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcHN0ZFt2YWx1ZV0ucHVzaChlbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcHN0ZDsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIFJpZ2h0Tm9kZQogIH0KfTsK"
    },
    {
      "version": 3,
      "sources": [
        "Rights.vue"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "Rights.vue",
      "sourceRoot": "src/components",
      "sourcesContent": [
        "<template>\n  <div class=\"rights\">\n    <div @load=\"init\">\n      <div class=\"tree\">\n        <RightNode \n          v-if=\"pstd!=null\"\n          name=\"root\"\n          :deep=\"1\"\n          :pstd.sync=\"pstd\"\n          :dvu.sync=\"dvu\"\n          :configuration.sync=\"init\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport RightNode from \"@/components/RightNode\";\nimport http from \"@/http/http\";\nimport config from \"@/config\";\nimport { storage, Storage } from \"@/storage\";\nimport store from \"@/store\";\nexport default {\n  name: \"Rights\",\n  computed: {\n    pstdReference() {\n      const reference = this.rights.references.filter(\n        reference =>\n          reference.name == \"types_de_donnees_par_themes_de_sites_et_projet\"\n      )[0];\n      this.getReference(reference, \"pstd\");\n      return reference;\n    },\n    dvuReference() {\n      const reference = this.rights.references.filter(\n        reference =>\n          reference.name == \"variables_et_unites_par_types_de_donnees\"\n      )[0];\n      this.getReference(reference, \"dvu\");\n      return reference;\n    },\n    init() {\n      let inited = {\n        pstdReference: this.pstdReference,\n        dvuReference: this.dvuReference\n      };\n      this.$emit(\"pstAndDvuInited\", inited);\n      return inited;\n    },\n  },\n  props: {\n    rights: Object\n  },\n  data() {\n    return {\n      pstd_: {},\n      dvu: null,\n      deep: 0,\n      comlums: {},\n      visible:false,\n    };\n  },\n  methods: {\n    getReference(reference, to) {\n      return http\n        .loadReference(reference, config.APPLICATION_NAME)\n        .then(response => {\n          storage.set(Storage.TOKEN_KEY, response.data.token);\n          this[to] = response.data;\n          if (to == \"pstd\") {\n            this[\"pstd_\"] = this.getPstd(reference.columns, response.data);\n          }\n          this.$emit(\"update:\" + to, response.data);\n        })\n        .catch(error => {\n          this.pstd = {};\n          this.$emit(\"error_\" + to, error);\n        });\n    },\n    getPstd(columns, data) {\n      if (Object.keys(columns).length == 0) {\n        return {};\n      }\n      let column = Object.values(columns)[this.deep].name;\n      let pstd = {};\n      data.forEach(element => {\n        let value = element.refValues[column];\n        if (pstd[value] == null) {\n          pstd[value] = [element];\n        } else {\n          pstd[value].push(element);\n        }\n      });\n      return pstd;\n    }\n  },\n  components: {\n    RightNode\n  }\n};\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped lang=\"scss\">\n.tree-list ul {\n  padding-left: 16px;\n  margin: 6px 0;\n}\n.references > table > tr > td {\n  border: solid 1px red;\n}\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"
      ]
    }
  ]
}